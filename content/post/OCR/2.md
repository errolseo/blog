---
title: "[OCR] 2. Synthetic text image(Ongoing)"
date: 2022-02-22T13:00:00+09:00
categories:
- OCR
tags:
- OCR
- synthetic text image
keywords:
- OCR
thumbnailImage: /images/OCR/2-fig1.png
thumbnailImagePosition: left
summary: 공개된 synthetic data와 그것을 만드는 방법에 대해 다룹니다.
katex: true
---
{{< alert warning >}}
본문의 내용은 개인적인 정리를 위해 작성되었기에 학술적이지 않습니다.  
또한 증명되지 않은 내용이 포함되어 있을 가능성이 존재합니다.
{{< /alert >}}

### 1.
딥 러닝 프로젝트를 위해서는 데이터와 모델을 확보할 필요가 있다. 만약 당신이 OCR을 위해 대량의 scene text images를 annotation할 자금이나 인력을 보유하고 있다면 인조 데이터에 대해 다룬 이 글이 별로 도움이 되지 않을 수도 있다. 하지만 그렇지 않다면 이 글은 중요한 내용이 될 것이다.

### 2.
[MJSynth(MJ)](https://www.robots.ox.ac.uk/~vgg/publications/2014/Jaderberg14c/)는 text image를 생성하는 합성 엔진이자 그것을 이용해서 만든 데이터셋을 말한다.  
\
{{< image classes="center" src="/images/OCR/2-fig1.png" title="Fig. 1: MJSynth pipeline" >}}

**1. Font rendering**
- [Google Fotns](https://fonts.google.com/)에서 다운로드한 1,400개의 폰트 중 선택
- 자간(kerning), 두께(weight), 밑줄(underline) 등 폰트 속성의 추가
- 사전 정의된 90k words의 dictionary $\mathcal{W}$에서 단어 선택
- horizontal bottom, random curve 등의 transform 선택

**2. Border/shadow rendering**
- inset/outset border, shadow 등 추가

**3. Base coloring**

**4. Projective distortion**
{{< image classes="center" src="/images/OCR/2-fig2.png" title="Fig. 2: Projective transformation" >}}  

**5. Natural data blending**
- ICDAR 2003 and SVT 등의 실제 이미지와 [합성(blend)](https://en.wikipedia.org/wiki/Blend_modes)

**6. Noise**
- Gaussian noise, blur, jpeg 손실 압축 왜곡 등의 noise 추가

\
MJ는 단순하지만 기본에 충실했다. 

### 3.
[SynthText(ST)](https://www.robots.ox.ac.uk/~vgg/publications/2016/Gupta16/)는 scene image의 text regions를 정의하고 여러 개의 word boxes를 생성 및 정의한 text regions을 이용해서 적절한 위치에 배치합니다. {{< hl-text primary >}}ST는 <b>scene text image</b> 제작에 특화되어{{< /hl-text >}} 있습니다. ST의 이미지 합성 메커니즘은 아래와 같고 synthtiger 논문에서 발췌했습니다.

**1. font rendering**

**2. border/shadow rendering**

**3. base coloring**

**4. poisson image editing**
{{< image classes="center" src="/images/OCR/2-fig3.png" title="Fig. 3: Poisson Image Editing (JM Di Martino et al.)" >}}

Text rendering 자체는 poisson image editing을 제외하면 MJ와 동일한 메커니즘을 가지지만 ST는 