---
title: "[OCR] Synthetic text image (1)"
date: 2022-02-22T13:00:00+09:00
categories:
- OCR
tags:
- MJSynth
- SynthText
keywords:
- OCR
thumbnailImage: /images/OCR/2-fig1.png
thumbnailImagePosition: left
summary: MJSynth / SynthText
katex: true
---
{{< alert warning >}}
본문의 내용은 개인적인 정리를 위해 작성되었기에 학술적이지 않습니다.  
또한 증명되지 않은 내용이 포함되어 있을 가능성이 존재합니다.
{{< /alert >}}

### 1.
딥 러닝 프로젝트를 위해서는 데이터와 모델을 확보할 필요가 있다. 만약 독자가 OCR을 위해 대량의 scene text image를 annotation할 자금이나 인력을 보유하고 있다면 인조 데이터에 대해 다룬 이 글은 별로 도움이 되지 않을 수도 있다. 하지만 그렇지 않다면 이 글은 독자에게 필수적인 내용이 될 것이다.

### 2.
[MJSynth(MJ)](https://www.robots.ox.ac.uk/~vgg/publications/2014/Jaderberg14c/)는 text image를 생성하는 합성 엔진이자 그것을 이용해서 만든 데이터셋을 말한다. MJ는 기본적인 방법만을 이용해서 대량의 text image를 생성해 recognition 모델의 성능에 크게 기여하였다.

{{< image classes="center" src="/images/OCR/2-fig1.png" title="Fig. 1: MJSynth pipeline" >}}

**1. Font rendering**
- [Google Fotns](https://fonts.google.com/)에서 다운로드한 1,400개의 폰트 중 선택
- 자간(kerning), 두께(weight), 밑줄(underline) 등 폰트 속성의 추가
- 사전 정의된 90k words의 dictionary $\mathcal{W}$에서 단어 선택
- Horizontal bottom, random curve 등의 transform 선택

**2. Border/shadow rendering**
- Inset/outset border, shadow 등 추가

**3. Base coloring**
- 외부 데이터에서 추출한 color map을 바탕으로 색 설정

**4. Projective distortion**
{{< image classes="center" src="/images/OCR/2-fig2.png" title="Fig. 2: Projective transformation" >}}  

**5. Natural data blending**
- ICDAR 2003 and SVT 등의 실제 이미지와 합성 [(Blend mode wikipedia)](https://en.wikipedia.org/wiki/Blend_modes)

**6. Noise**
- Gaussian noise, blur, jpeg 손실 압축 왜곡 등의 noise 추가

2014년에 만들어진 MJ 데이터는 scene text image는 아니기에 scene text detection을 위해서 별도의 데이터를 필요하다는 치명적인 단점이 존재한다. 그렇지만 MJ는 대용량 OCR 인조 데이터의 출발점을 끊었고 기본적인 방향성은 후에 이루어진 많은 연구에 영향을 주었다.

### 3.
[SynthText(ST)](https://www.robots.ox.ac.uk/~vgg/publications/2016/Gupta16/)의 기본적인 pipeline은 MJ와 유사하지만 추가적인 기술을 이용해 {{< hl-text primary >}}양적인 측면과 질적인 측면 모두 양호한 <b>scene text image</b>를 생성해 냈다.{{< /hl-text >}} ST는 MJ와 함께 많은 논문에서 pre-trained 모델을 학습하는데 사용하고 있다.  
인조 데이터의 이상적인 목표는 모집단 $\mathrm{N}$과 최대로 유사한 표본집단 $\mathrm{n}$을 생성해 내는 것이다. 모집단과 동일한 수준의 **다양성**을 표본집단이 확보하는 것이다.

{{< image classes="center" src="/images/OCR/2-fig3.png" title="Fig. 3: Poisson Image Editing (JM Di Martino et al.)" >}}
{{< image classes="center" src="/images/OCR/2-fig4-1.png" >}}
{{< image classes="center" src="/images/OCR/2-fig4-2.png" title="Fig. 4: Contour based segmentation" >}}


##### To Do
- Generate custom dataset