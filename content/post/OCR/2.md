---
title: "[OCR] 2. Synthetic text image(Ongoing)"
date: 2022-02-22T13:00:00+09:00
categories:
- OCR
tags:
- OCR
- synthetic text image
keywords:
- OCR
thumbnailImage: /images/OCR/2-fig1.png
thumbnailImagePosition: left
summary: 공개된 synthetic data와 그것을 만드는 방법에 대해 다룹니다.
katex: true
---
{{< alert warning >}}
본문의 내용은 개인적인 정리를 위해 작성되었기에 학술적이지 않습니다.  
또한 증명되지 않은 내용이 포함되어 있을 가능성이 존재합니다.
{{< /alert >}}

### 1.
딥 러닝 프로젝트를 위해서는 데이터와 모델을 확보할 필요가 있다. 만약 독자가 OCR을 위해 대량의 scene text images를 annotation할 자금이나 인력을 보유하고 있다면 인조 데이터에 대해 다룬 이 글은 별로 도움이 되지 않을 수도 있다. 하지만 그렇지 않다면 이 글은 독자에게 필수적인 내용이 될 것이다.

### 2.
[MJSynth(MJ)](https://www.robots.ox.ac.uk/~vgg/publications/2014/Jaderberg14c/)는 text image를 생성하는 합성 엔진이자 그것을 이용해서 만든 데이터셋을 말한다. MJ는 단순하지만 기본에 충실했다.
\
{{< image classes="center" src="/images/OCR/2-fig1.png" title="Fig. 1: MJSynth pipeline" >}}

**1. Font rendering**
- [Google Fotns](https://fonts.google.com/)에서 다운로드한 1,400개의 폰트 중 선택
- 자간(kerning), 두께(weight), 밑줄(underline) 등 폰트 속성의 추가
- 사전 정의된 90k words의 dictionary $\mathcal{W}$에서 단어 선택
- Horizontal bottom, random curve 등의 transform 선택

**2. Border/shadow rendering**
- Inset/outset border, shadow 등 추가

**3. Base coloring**
- 외부 데이터에서 추출한 color map을 바탕으로 색 설정

**4. Projective distortion**
{{< image classes="center" src="/images/OCR/2-fig2.png" title="Fig. 2: Projective transformation" >}}  

**5. Natural data blending**
- ICDAR 2003 and SVT 등의 실제 이미지와 합성 [(Blend mode wikipedia)](https://en.wikipedia.org/wiki/Blend_modes)

**6. Noise**
- Gaussian noise, blur, jpeg 손실 압축 왜곡 등의 noise 추가

\
하지만 MJ의 데이터는 scene text image라고 하기에는 무리가 있으며 recognition 모델의 입력으로만 사용할 수 있다.

### 3.
[SynthText(ST)](https://www.robots.ox.ac.uk/~vgg/publications/2016/Gupta16/)의 기본적인 pipeline은 MJ와 유사하다. 다만 많은 기술이 이용해 이미지 합성 과정을 고도화했다. {{< hl-text primary >}}양적인 측면과 질적인 측면 모두 양호하여 많은 모델들이 pre-trained 모델을 학습하는데 사용하고 있다.{{< /hl-text >}} 

{{< image classes="center" src="/images/OCR/2-fig3.png" title="Fig. 3: Poisson Image Editing (JM Di Martino et al.)" >}}

ST는 기본적으로 off-the-shelf 방식을 사용한다.